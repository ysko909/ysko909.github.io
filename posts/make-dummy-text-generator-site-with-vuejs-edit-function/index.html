<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Vue cliとBuefyでシンプルに始めるVue.js - テキスト生成の機能を実装してデプロイまで - 頑張らないために頑張る</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Vue cliとBuefyでシンプルに始めるVue.js - テキスト生成の機能を実装してデプロイまで" />
<meta property="og:description" content="はじめに 前回は、とりあえず見た目のコンポーネントを実装しました。今回はテキストを生成する機能を実装してデプロイまでしてしまいます。後述しますがデプロイ先はGitHub Pagesです。便利ですよね。
今回の成果物 こちらです。
Vue.jsのオフィシャルを参考に 機能を実装するにあたっては何はともあれ、まずはVue.jsのガイドを読みます。とくにコンポーネントの部分はよく参照することになると思います。自分はここを見つつソースの編集をしてました。
実際書いたソース 結構長いので折りたたみます。
 JavaScriptのソース
&lt;template&gt; &lt;div&gt; &lt;b-button size=&#34;is-medium&#34; v-bind:icon-left=&#34;buttonIcon&#34; @click=&#34;generateText(quoteTextname, outputNumber, genOptions)&#34; &gt;{{ buttonMsg }}&lt;/b-button&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#34;GenerateText&#34;, props: { buttonMsg: { type: String, required: true }, buttonIcon: { type: String, required: true }, quoteTextname: { type: String, required: true }, outputNumber: { type: Number, required: true }, genOptions: { type: Array, required: false } }, methods: { generateText: function(quoteTextname, outputNumber, genOptions) { // コピーのコマンドに対応しているか確認する if (document." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://idontwannawork.github.io/posts/make-dummy-text-generator-site-with-vuejs-edit-function/" /><meta property="article:published_time" content="2019-09-02T16:08:20&#43;09:00"/>
<meta property="article:modified_time" content="2019-09-02T16:08:20&#43;09:00"/><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Vue cliとBuefyでシンプルに始めるVue.js - テキスト生成の機能を実装してデプロイまで"/>
<meta name="twitter:description" content="はじめに 前回は、とりあえず見た目のコンポーネントを実装しました。今回はテキストを生成する機能を実装してデプロイまでしてしまいます。後述しますがデプロイ先はGitHub Pagesです。便利ですよね。
今回の成果物 こちらです。
Vue.jsのオフィシャルを参考に 機能を実装するにあたっては何はともあれ、まずはVue.jsのガイドを読みます。とくにコンポーネントの部分はよく参照することになると思います。自分はここを見つつソースの編集をしてました。
実際書いたソース 結構長いので折りたたみます。
 JavaScriptのソース
&lt;template&gt; &lt;div&gt; &lt;b-button size=&#34;is-medium&#34; v-bind:icon-left=&#34;buttonIcon&#34; @click=&#34;generateText(quoteTextname, outputNumber, genOptions)&#34; &gt;{{ buttonMsg }}&lt;/b-button&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#34;GenerateText&#34;, props: { buttonMsg: { type: String, required: true }, buttonIcon: { type: String, required: true }, quoteTextname: { type: String, required: true }, outputNumber: { type: Number, required: true }, genOptions: { type: Array, required: false } }, methods: { generateText: function(quoteTextname, outputNumber, genOptions) { // コピーのコマンドに対応しているか確認する if (document."/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300"
		rel="stylesheet">

	<link rel="stylesheet" type="text/css" media="screen" href="https://idontwannawork.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://idontwannawork.github.io/css/main.css" />
	<link rel="stylesheet" type="text/css" href="https://idontwannawork.github.io/css/dark.css"
		 />
	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script><script src="https://idontwannawork.github.io/js/main.js"></script>
	<script data-ad-client="ca-pub-2615583270378842" async
		src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

	<script async src="//pagead2.googlesyndication.com/
		pagead/js/adsbygoogle.js"></script>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({
			google_ad_client: "pub-2615583270378842",
			enable_page_level_ads: true
		});
	</script>
</head>
<body>
	<div class="container wrapper post">
		<div class="header">
	<h1 class="site-title">頑張らないために頑張る</h1>
	<div class="site-description"><h2>頑張りたくないので楽できるように頑張ります</h2><nav class="nav social">
			<ul class="flat"><a href="https://twitter.com/unknown_strings" title="Twitter"><i data-feather="twitter"></i></a><a href="https://github.com/idontwannawork" title="Github"><i data-feather="github"></i></a><a href="https://codepen.io/idontwannawork/" title="Codepen"><i data-feather="codepen"></i></a><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
			<li>
				<a href="https://forms.gle/mtbEheX7qDrZfKPP8">Contact</a>
			</li>
			
			<li>
				<a href="ppolicy/">Privacy policy</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post-header">
			<h1 class="title">Vue cliとBuefyでシンプルに始めるVue.js - テキスト生成の機能を実装してデプロイまで</h1>
			<div class="meta">Posted at &mdash; Sep 2, 2019</div>
		</div>

		<div class="markdown">
			

<h2 id="はじめに">はじめに</h2>

<p><a href="/posts/make-dummy-text-generator-site-with-vuejs-add-ui/">前回</a>は、とりあえず見た目のコンポーネントを実装しました。今回はテキストを生成する機能を実装してデプロイまでしてしまいます。後述しますがデプロイ先はGitHub Pagesです。便利ですよね。</p>

<h2 id="今回の成果物">今回の成果物</h2>

<p><a href="https://idontwannawork.github.io/dummytextgenerator/">こちら</a>です。</p>

<h2 id="vue-jsのオフィシャルを参考に">Vue.jsのオフィシャルを参考に</h2>

<p>機能を実装するにあたっては何はともあれ、まずは<a href="https://jp.vuejs.org/v2/guide/">Vue.jsのガイド</a>を読みます。とくに<a href="https://jp.vuejs.org/v2/guide/components.html">コンポーネント</a>の部分はよく参照することになると思います。自分はここを見つつソースの編集をしてました。</p>

<h2 id="実際書いたソース">実際書いたソース</h2>

<p>結構長いので折りたたみます。</p>

<p><details>
<summary>JavaScriptのソース</summary></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;template&gt;
&lt;div&gt;
    &lt;b-button
    size=&#34;is-medium&#34;
    v-bind:icon-left=&#34;buttonIcon&#34;
    @click=&#34;generateText(quoteTextname, outputNumber, genOptions)&#34;
    &gt;{{ buttonMsg }}&lt;/b-button&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
name: &#34;GenerateText&#34;,
props: {
    buttonMsg: {
    type: String,
    required: true
    },
    buttonIcon: {
    type: String,
    required: true
    },
    quoteTextname: {
    type: String,
    required: true
    },
    outputNumber: {
    type: Number,
    required: true
    },
    genOptions: {
    type: Array,
    required: false
    }
},
methods: {
    generateText: function(quoteTextname, outputNumber, genOptions) {
    // コピーのコマンドに対応しているか確認する
    if (document.queryCommandSupported(&#34;copy&#34;)) {
        // テキスト生成する元ネタから指定された数の分だけ文字列を切り出す
        this.quoteTexts.forEach(quoteText =&gt; {
        if (quoteTextname === quoteText[0]) {
            this.returnText = quoteText[1].slice(0, outputNumber);
        }
        });

        // 指定されたオプションに従って文字列を編集する
        if (genOptions.length &gt; 0) {
            const breakChar = &#34;\n&#34;;
            let periodChar = &#34;。&#34;;
            if (quoteTextname === &#34;Lorem&#34;) {
                periodChar = &#34;. &#34;;
            }

            if (genOptions.find(genOption =&gt; genOption === &#34;needBreak&#34;)){
                // 改行を付与する
                this.returnText = this.returnText.split(periodChar).join(periodChar + breakChar);
            }

            if (genOptions.find(genOption =&gt; genOption === &#34;makeWide&#34;)){
                // 全角に変換する
                this.returnText = this.returnText.replace(/[A-Za-z0-9]/g, function(s) {
                    return String.fromCharCode(s.charCodeAt(0) + 65248);
                });
            }

            if (genOptions.find(genOption =&gt; genOption === &#34;endWithPeriod&#34;)){
                // 句点あるいはピリオドで終わるよう編集する
                const lastPeriodIndex = this.returnText.lastIndexOf(periodChar) + 1;
                this.returnText = this.returnText.slice(0, lastPeriodIndex);
            }

            if (genOptions.find(genOption =&gt; genOption === &#34;addPtag&#34;)){
                // 文章ごとにPタグを付与する
                if (genOptions.find(genOption =&gt; genOption === &#34;needBreak&#34;)){
                    // 改行コード付与済みの場合は、Pタグを付与後再度改行コードを付与する
                    const splitedByBreak = this.returnText.split(breakChar);
                    this.returnText = &#34;&#34;;
                    splitedByBreak.forEach(word =&gt; {
                        this.returnText = this.returnText + &#34;&lt;p&gt;&#34; + word + &#34;&lt;/p&gt;&#34; + breakChar;
                    });
                } else {
                    const splitedByPeriod = this.returnText.split(periodChar);
                    this.returnText = &#34;&#34;;
                    splitedByPeriod.forEach(word =&gt; {
                        this.returnText = this.returnText + &#34;&lt;p&gt;&#34; + word + periodChar + &#34;&lt;/p&gt;&#34;;
                    });
                }
            }
        }

        // コピー実行の下準備として新規のテキストエリアを生成し配置する
        const copyFrom = document.createElement(&#34;textarea&#34;);
        copyFrom.textContent = this.returnText;
        const bodyElm = document.getElementsByTagName(&#34;body&#34;)[0];
        bodyElm.appendChild(copyFrom);

        // テキストをクリップボードにコピーしてテキストエリアは破棄する
        copyFrom.select();
        const retVal = document.execCommand(&#34;copy&#34;);
        bodyElm.removeChild(copyFrom);

        // 正常に終わった旨を表示する
        this.$buefy.toast.open({
            message: &#34;クリップボードにコピーしました！&#34;,
            type: &#34;is-success&#34;
        });

        this.$emit(&#34;child-event&#34;, this.returnText + retVal);
    } else {
        // コピー機能にブラウザが未対応または無効ならエラーメッセージを出力
        this.$buefy.toast.open({
        duration: 5000,
        message: &#34;コピーに失敗しました。&#34;,
        type: &#34;is-danger&#34;
        });

        this.$emit(&#34;child-event&#34;, this.returnText);
    }
    }
},
data: function() {
    return {
    returnText: &#34;nothing!&#34;,
    quoteTexts: [
        [
        &#34;Lorem&#34;,
        &#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Dui id ornare arcu odio ut sem nulla pharetra diam. Risus viverra adipiscing at in. Augue lacus viverra vitae congue eu consequat ac felis donec. Volutpat sed cras ornare arcu dui. Vitae nunc sed velit dignissim sodales ut eu sem integer. Faucibus in ornare quam viverra orci. Dictumst vestibulum rhoncus est pellentesque elit ullamcorper dignissim. Nulla facilisi nullam vehicula ipsum a arcu cursus vitae congue. Placerat in egestas erat imperdiet. Dolor sit amet consectetur adipiscing elit duis. Adipiscing commodo elit at imperdiet dui. Ut tellus elementum sagittis vitae et leo duis ut. Tristique magna sit amet purus. Commodo odio aenean sed adipiscing diam donec.&#34;
        ],
        [
        &#34;Kokoro&#34;,
        &#34;私はその人を常に先生と呼んでいた。だからここでもただ先生と書くだけで本名は打ち明けない。これは世間を憚かる遠慮というよりも、その方が私にとって自然だからである。私はその人の記憶を呼び起すごとに、すぐ「先生」といいたくなる。筆を執っても心持は同じ事である。よそよそしい頭文字などはとても使う気にならない。私が先生と知り合いになったのは鎌倉である。その時私はまだ若々しい書生であった。暑中休暇を利用して海水浴に行った友達からぜひ来いという端書を受け取ったので、私は多少の金を工面して、出掛ける事にした。私は金の工面に二、三日を費やした。ところが私が鎌倉に着いて三日と経たないうちに、私を呼び寄せた友達は、急に国元から帰れという電報を受け取った。電報には母が病気だからと断ってあったけれども友達はそれを信じなかった。友達はかねてから国元にいる親たちに勧まない結婚を強いられていた。彼は現代の習慣からいうと結婚するにはあまり年が若過ぎた。それに肝心の当人が気に入らなかった。それで夏休みに当然帰るべきところを、わざと避けて東京の近くで遊んでいたのである。彼は電報を私に見せてどうしようと相談をした。私にはどうしていいか分らなかった。けれども実際彼の母が病気であるとすれば彼は固より帰るべきはずであった。それで彼はとうとう帰る事になった。せっかく来た私は一人取り残された。学校の授業が始まるにはまだ大分日数があるので鎌倉におってもよし、帰ってもよいという境遇にいた私は、当分元の宿に留まる覚悟をした。友達は中国のある資産家の息子で金に不自由のない男であったけれども、学校が学校なのと年が年なので、生活の程度は私とそう変りもしなかった。したがって一人ぼっちになった私は別に恰好な宿を探す面倒ももたなかったのである。宿は鎌倉でも辺鄙な方角にあった。玉突きだのアイスクリームだのというハイカラなものには長い畷を一つ越さなければ手が届かなかった。車で行っても二十銭は取られた。けれども個人の別荘はそこここにいくつでも建てられていた。&#34;
        ],
        [
        &#34;Galaxy&#34;,
        &#34;「ではみなさんは、そういうふうに川だと言われたり、乳の流れたあとだと言われたりしていた、このぼんやりと白いものがほんとうは何かご承知ですか」先生は、黒板につるした大きな黒い星座の図の、上から下へ白くけぶった銀河帯のようなところを指しながら、みんなに問いをかけました。カムパネルラが手をあげました。それから四、五人手をあげました。ジョバンニも手をあげようとして、急いでそのままやめました。たしかにあれがみんな星だと、いつか雑誌で読んだのでしたが、このごろはジョバンニはまるで毎日教室でもねむく、本を読むひまも読む本もないので、なんだかどんなこともよくわからないという気持ちがするのでした。ところが先生は早くもそれを見つけたのでした。「ジョバンニさん。あなたはわかっているのでしょう」ジョバンニは勢いよく立ちあがりましたが、立ってみるともうはっきりとそれを答えることができないのでした。ザネリが前の席からふりかえって、ジョバンニを見てくすっとわらいました。ジョバンニはもうどぎまぎしてまっ赤になってしまいました。先生がまた言いました。「大きな望遠鏡で銀河をよっく調べると銀河はだいたい何でしょう」やっぱり星だとジョバンニは思いましたが、こんどもすぐに答えることができませんでした。先生はしばらく困ったようすでしたが、眼をカムパネルラの方へ向けて、「ではカムパネルラさん」と名指しました。するとあんなに元気に手をあげたカムパネルラが、やはりもじもじ立ち上がったままやはり答えができませんでした。先生は意外なようにしばらくじっとカムパネルラを見ていましたが、急いで、「では、よし」と言いながら、自分で星図を指しました。「このぼんやりと白い銀河を大きないい望遠鏡で見ますと、もうたくさんの小さな星に見えるのです。ジョバンニさんそうでしょう」ジョバンニはまっ赤になってうなずきました。けれどもいつかジョバンニの眼のなかには涙がいっぱいになりました。そうだ僕は知っていたのだ、もちろんカムパネルラも知っている、それはいつかカムパネルラのお父さんの博士のうちでカムパネルラといっしょに読んだ雑誌のなかにあったのだ。それどこでなくカムパネルラは、その雑誌を読むと、すぐお父さんの書斎から巨きな本をもってきて、ぎんがというところをひろげ、まっ黒な頁いっぱいに白に点々のある美しい写真を二人でいつまでも見たのでした。それをカムパネルラが忘れるはずもなかったのに、すぐに返事をしなかったのは、このごろぼくが、朝にも午後にも仕事がつらく、学校に出てももうみんなともはきはき遊ばず、カムパネルラともあんまり物を言わないようになったので、カムパネルラがそれを知ってきのどくがってわざと返事をしなかったのだ、そう考えるとたまらないほど、じぶんもカムパネルラもあわれなような気がするのでした。&#34;
        ],
        [
        &#34;Wikipedia&#34;,
        &#34;超弦理論が登場する以前に最も小さなスケールを記述した理論は場の量子論である。そこでは粒子を点、すなわち点粒子として扱ってきた（局所場の理論に代わる、広がりを持った粒子の概念を導入したS行列理論や非局所場理論などもあった）。一方、超弦理論では粒子を弦の振動として表す。1960年代、イタリアの物理学者、ガブリエーレ・ヴェネツィアーノが核子の内部で働く強い力の性質をベータ関数で表し、その式の示す構造が「弦 (string)」によって記述されることに南部陽一郎、レオナルド・サスキンド、ホルガー・ベック・ニールセンらが気付いたことから始まる。弦には「閉じた弦」と「開いた弦」の2種類を考えることができ、開いた弦はスピン1のゲージ粒子（光子、ウィークボソン、グルーオンなどに相当）を含み、閉じた弦はスピン2の重力子を含む。開いた弦の相互作用を考えるとどうしても閉じた弦、すなわち重力子を含まざるを得ない。そのため、強い力のみを記述する理論と捉えることは難しいことが分かった。逆に言えば、弦を基本要素と考えることで、自然に重力を量子化したものが得られると考えられる。そのため、超弦理論は万物の理論となりうる可能性がある。超弦理論は素粒子の標準模型の様々な粒子を導出しうる大きな自由度を持ち、それを元に現在までに様々なモデルが提案されている。このように極めて小さい弦を宇宙の最小基本要素と考え、自然界の全ての力を数学的に表現しようというのが、いわゆる弦理論（超弦理論、M理論を含む）の目指すところである。&#34;
        ]
    ]
    };
}
};
&lt;/script&gt;</pre></div>
<p></details></p>

<h2 id="機能の概要">機能の概要</h2>

<h3 id="templateの部分">templateの部分</h3>

<p>ダミーテキストを生成するボタンを表示します。実際のページでは、トップ部分と下位の部分にそれぞれボタンを1つずつ配置しています。これ、見た目は違いますが中身は同一のコンポーネントを指しています。Vue.jsが言うところの<a href="https://jp.vuejs.org/v2/guide/components.html#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%86%8D%E5%88%A9%E7%94%A8">コンポーネントの再利用</a>をしていると言っていいのでは。</p>

<p>ちなみに、ボタンとアイコンは、任意のものに変更できるよう実装しています。趣味です_(:3」∠)_</p>

<p><img src="2019-09-03-15-38-07.png" alt="pic" /></p>

<p><img src="2019-09-03-15-39-19.png" alt="pic" /></p>

<p>ちなみに、アイコンを指定している部分は<code>v-bind</code>しているのですが、省略記法を利用していません。「<code>v-on</code>の省略記法<code>@</code>を使っているのになんで？」ってところなんですが、なんとなく「<code>:</code>だけってのがしっくりこない」ってだけの理由です_(:3」∠)_</p>

<h3 id="scriptの部分">scriptの部分</h3>

<p>JavaScriptにまだそんなに慣れてないせいで、「こんな書き方しないよ！」っていう書き方をしている可能性が微レ存どころの騒ぎじゃないので、おかしかったらご指摘いただければ幸いです。</p>

<h4 id="基本的にやっていること">基本的にやっていること</h4>

<p>やっていることは至極単純で「ひたすら文字列操作」です。</p>

<ul>
<li>指定されたテキスト元を選択</li>
<li>指定された分の文字数を切り出し</li>
<li>オプションとして指定があれば改行コードを付与</li>
<li>オプションとして指定があれば全角変換</li>
<li>オプションとして指定があれば句点（英文の場合ピリオド）で終わるよう制御</li>
<li>オプションとして指定があればPタグの付与</li>
</ul>

<p>自分でやっておいて何なんですが、オプションを複数選択可能にしたため「改行しつつPタグ付与」という場合と「単純にPタグ付与」する場合で、ちょっと条件分岐して処理内容を変える必要があったのは面倒くさかったです。まぁ、こういうのってやってみないと分からないので、いい経験になりました。</p>

<h4 id="生成したテキストの処理">生成したテキストの処理</h4>

<p>生成したテキストの処遇ですが、当初から考えていたように「クリップボードにコピーする」方法を採用しました。<code>execCommand</code>の<a href="https://developer.mozilla.org/ja/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard">MDN</a>を参考にしながら実装しました。なお、これのせいで<a href="https://developer.mozilla.org/ja/docs/Web/API/Document/execCommand#Browser_compatibility">古いInternet Explorerでは動作しません</a>。まぁ、そんなに困ることもないだろうと思ってそのままです。</p>

<h4 id="テキスト生成後">テキスト生成後</h4>

<p>ボタンを押して何の反応もないと正常に動作したのかわかりませんし、何よりつまらないです。なので、Buefyのドキュメントを見て気になっていた<a href="https://buefy.org/documentation/toast">Toast</a>を実装してみました。要は「正常に処理できたよ！」あるいは「できなかったよ！」というレスポンスを出力できるようにしました。「できなかったよ！」とエラーが返るのは<code>queryCommandSupported('copy')</code>でコマンドの実行ができないと判断された場合です。</p>

<h4 id="その他">その他</h4>

<p>テキストの元ネタをべた書きしているので、ちょっと不格好ですがあまり気にしても仕方ないかなーと思ってそのままです。</p>

<p>なお、「句点まで生成する」を選択した際に出力文字数が少なすぎると、「クリップボードにコピーしたよ！」というメッセージが出力されるにもかかわらず、文章がコピーできない事象を確認しています。抽出元テキストの文章はものによって冒頭の1文がとても長いため、1文が終わる（始めての句点が来る）前に指定された出力文字数へ到達してしまうのが原因です。</p>

<p>そのうち直そうと思います。ええ、そのうちに_(:3」∠)_</p>

<h2 id="デプロイ先の選定">デプロイ先の選定</h2>

<p>作成したアプリケーションをデプロイします。デプロイする先の候補としては下記のところがあげられると思います。</p>

<ul>
<li>GitHub Pages</li>
<li>Netlify</li>
<li>Heroku</li>
<li>Firebase</li>
</ul>

<p>他にもたくさんありますが、だいたいこのあたりだと思います。今回はGitHub Pagesにデプロイします。手順は<a href="https://cli.vuejs.org/guide/deployment.html#github-pages">ここ</a>を参考にしました。</p>

<h2 id="デプロイ">デプロイ</h2>

<h3 id="vue-config-jsの準備">vue.config.jsの準備</h3>

<p>GitHub Pagesにデプロイする場合で、デプロイ先のURLが<code>https://&lt;ユーザー名&gt;.github.io/&lt;リポジトリ名&gt;/</code>である場合は<code>vue.config.js</code>というファイルが必要です。もともと存在するファイルではないので、新規で作成する必要があります。内容はこんな感じ。</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">module.exports = {
    publicPath: process.env.NODE_ENV === <span style="color:#a31515">&#39;production&#39;</span>
      ? <span style="color:#a31515">&#39;/リポジトリ名/&#39;</span>
      : <span style="color:#a31515">&#39;/&#39;</span>
  }
</code></pre></div>
<p>なお、デプロイ先のURLが<code>https://&lt;ユーザー名&gt;.github.io/</code>のタイプはこの作業を行わなくてOKです。</p>

<h3 id="ビルドする">ビルドする</h3>

<p>コンソールにて下記のコマンドを実行します。</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">npm run build</code></pre></div>
<p>しばらく待っていると<code>dist</code>フォルダ中にファイルが生成されます。なお、このファイルをローカルで開いても、真っ白なページが表示されるだけで何も動作しません。これは<code>npm run build</code>で生成されたファイル達が「デプロイされた先で動作する」仕様にチューニングされているからです。なので、ローカルでは動作しないのですね。</p>

<h3 id="githubにプッシュする">GitHubにプッシュする</h3>

<p>先にGitHubにてリポジトリを作成しておきます。なお、ここで作成するリポジトリ名は、<code>vue.config.js</code>に記述したリポジトリ名と同一の名前でないといけません。</p>

<p>ここでとあるシェルスクリプトを作成します。こんな感じ。作成するフォルダはプロジェクトフォルダ直下です。作成したらおもむろに実行します。</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#00f">#!/usr/bin/env sh
</span><span style="color:#00f"></span>
set -e

npm run build

cd dist

git init
git add -A
git commit -m <span style="color:#a31515">&#39;deploy&#39;</span>

git push -f git@github.com:ユーザー名/リポジトリ名.git master:gh-pages

cd -</code></pre></div>
<p>最後の<code>git push</code>でデプロイ先を<code>gh-pages</code>ブランチにしてるのがミソですね。というのは、リポジトリを作成して<code>gh-pages</code>ブランチにプッシュするだけで、あとは勝手にGitHubが<a href="https://help.github.com/ja/articles/configuring-a-publishing-source-for-github-pages">サイトのソース設定を自動的に有効</a>へ設定してくれます。なので、「プッシュしてからリポジトリのSettingを変更する」という手間が省けるわけです。あとはURLにアクセスすればもう動作します。簡単！</p>

<p>なお、アップロードしてから実際のページに反映されるまでは即時反映とは行かず、微妙に時間がかかります。とは言っても数十秒、遅くても数分ですが。</p>

<p>もちろん、<code>master</code>ブランチの<code>/docs</code>フォルダにファイルを配置して公開する、という方法もあります。こちらはリポジトリのSettingsでサイトのソース設定を変更する必要があるので注意。</p>

<h2 id="おわりに">おわりに</h2>

<p>これでVue.jsを利用した簡単なアプリケーションの実装ができました。今回は外部APIなどは利用しませんでしたが、<a href="https://jp.vuejs.org/v2/cookbook/using-axios-to-consume-apis.html">axios</a>を利用すればAPIからデータを取得し利用できます。次は外部APIの利用を含めて、もうちょっと機能や見た目について向上したアプリケーションを実装したいものです。</p>

<p>頑張ります。_(:3」∠)_</p>

		</div><div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'come-as-you-are';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
		Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> © Copyright Tetsuya K. |  <a href="https://github.com/vividvilla/ezhil">Ezhil theme</a> | Built with <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-140331728-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
